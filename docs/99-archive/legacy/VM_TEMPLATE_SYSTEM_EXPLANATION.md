# VM 템플릿 시스템 설명

> [← 홈](../../00-home.md) | [아카이브](../) | [Legacy 기록](./) | [VM 템플릿 시스템 설명](./VM_TEMPLATE_SYSTEM_EXPLANATION.md)

## ⚠️ 참고사항

이 문서는 과거 프로젝트 기록입니다. 현재 LIMEN 프로젝트는 위키 형식으로 재구성되었으며, 이 문서는 참고용으로 보관됩니다.

---

## 📋 현재 상황

### 현재 VM 생성 방식
지금은 VM을 생성할 때마다 **모든 설정을 하나하나 입력**해야 합니다:

```
1. VM 이름 입력: "web-server-01"
2. OS 타입 선택: "ubuntu-server" 
3. CPU 개수 입력: 4
4. Memory 입력: 4096 (MB)
```

만약 비슷한 VM을 여러 개 만들려면:
- "web-server-01" → CPU: 4, Memory: 4096
- "web-server-02" → CPU: 4, Memory: 4096  ← **똑같은 설정을 또 입력**
- "web-server-03" → CPU: 4, Memory: 4096  ← **똑같은 설정을 또 입력**
- "db-server-01" → CPU: 8, Memory: 8192
- "db-server-02" → CPU: 8, Memory: 8192  ← **똑같은 설정을 또 입력**

**문제점**: 
- 매번 같은 설정을 반복 입력
- 실수로 잘못된 값 입력 가능
- 시간 낭비

---

## 🎯 VM 템플릿 시스템이란?

**템플릿 = 자주 사용하는 VM 설정을 미리 저장해두는 것**

템플릿을 만들면, 그 템플릿을 선택해서 **VM 이름만 입력하면** 바로 VM이 생성됩니다!

### 예시

#### 템플릿 생성 (한 번만)
```
템플릿 이름: "웹 서버 (소형)"
- OS: ubuntu-server
- CPU: 2
- Memory: 2048 MB
- 설명: "소규모 웹 서버용"

템플릿 이름: "웹 서버 (중형)"
- OS: ubuntu-server
- CPU: 4
- Memory: 4096 MB
- 설명: "중규모 웹 서버용"

템플릿 이름: "데이터베이스 서버"
- OS: ubuntu-server
- CPU: 8
- Memory: 8192 MB
- 설명: "PostgreSQL/MySQL용"

템플릿 이름: "개발 환경"
- OS: ubuntu-desktop
- CPU: 2
- Memory: 4096 MB
- 설명: "개발자용 GUI 환경"
```

#### VM 생성 (템플릿 사용)
```
1. "웹 서버 (소형)" 템플릿 선택
2. VM 이름만 입력: "web-01"
3. 생성 버튼 클릭
→ 끝! (CPU, Memory는 템플릿에서 자동으로 가져옴)
```

---

## 💡 구체적인 사용 시나리오

### 시나리오 1: 웹 서버 여러 대 생성

**템플릿 없이 (현재)**:
```
1. VM 이름: "web-01", OS: ubuntu-server, CPU: 4, Memory: 4096 → 생성
2. VM 이름: "web-02", OS: ubuntu-server, CPU: 4, Memory: 4096 → 생성
3. VM 이름: "web-03", OS: ubuntu-server, CPU: 4, Memory: 4096 → 생성
```
→ **매번 4개 필드 입력** (총 12번 입력)

**템플릿 사용 (개선 후)**:
```
1. "웹 서버 (중형)" 템플릿 선택
2. VM 이름: "web-01" → 생성
3. VM 이름: "web-02" → 생성
4. VM 이름: "web-03" → 생성
```
→ **템플릿 선택 1번 + 이름만 입력** (총 4번 입력)

**시간 절약**: 약 70% 단축!

---

### 시나리오 2: 팀원들이 일관된 개발 환경 사용

**문제**: 
- 개발자 A: CPU 2, Memory 2048로 생성
- 개발자 B: CPU 4, Memory 4096로 생성 (다른 설정)
- 개발자 C: CPU 1, Memory 1024로 생성 (너무 작아서 문제 발생)

**템플릿 사용**:
- Admin이 "표준 개발 환경" 템플릿 생성 (CPU: 2, Memory: 4096)
- 모든 개발자가 이 템플릿만 사용
- **일관된 환경 보장** + **설정 실수 방지**

---

### 시나리오 3: 프로덕션/스테이징/개발 환경

**템플릿 구성**:
```
1. "프로덕션 웹 서버"
   - CPU: 8, Memory: 16384
   - 설명: "프로덕션용 고성능 서버"

2. "스테이징 웹 서버"
   - CPU: 4, Memory: 8192
   - 설명: "스테이징 환경용"

3. "개발 웹 서버"
   - CPU: 2, Memory: 4096
   - 설명: "개발 환경용"
```

**사용**:
- 프로덕션 서버 필요 → "프로덕션 웹 서버" 템플릿 선택
- 스테이징 서버 필요 → "스테이징 웹 서버" 템플릿 선택
- 개발 서버 필요 → "개발 웹 서버" 템플릿 선택

**장점**: 환경별로 올바른 리소스 할당 보장

---

## 🎨 UI 예상 모습

### 템플릿 관리 페이지 (Admin 또는 사용자)

```
┌─────────────────────────────────────────┐
│  VM 템플릿 관리                          │
├─────────────────────────────────────────┤
│  [+ 새 템플릿 만들기]                    │
│                                         │
│  ┌───────────────────────────────────┐  │
│  │ 📦 웹 서버 (소형)                 │  │
│  │ OS: ubuntu-server                 │  │
│  │ CPU: 2 코어 | Memory: 2048 MB    │  │
│  │ [사용] [수정] [삭제]              │  │
│  └───────────────────────────────────┘  │
│                                         │
│  ┌───────────────────────────────────┐  │
│  │ 📦 웹 서버 (중형)                 │  │
│  │ OS: ubuntu-server                 │  │
│  │ CPU: 4 코어 | Memory: 4096 MB    │  │
│  │ [사용] [수정] [삭제]              │  │
│  └───────────────────────────────────┘  │
│                                         │
│  ┌───────────────────────────────────┐  │
│  │ 📦 데이터베이스 서버              │  │
│  │ OS: ubuntu-server                 │  │
│  │ CPU: 8 코어 | Memory: 8192 MB    │  │
│  │ [사용] [수정] [삭제]              │  │
│  └───────────────────────────────────┘  │
└─────────────────────────────────────────┘
```

### VM 생성 페이지 (템플릿 사용)

```
┌─────────────────────────────────────────┐
│  Create New VM                          │
├─────────────────────────────────────────┤
│  [템플릿에서 생성] [직접 입력]          │
│                                         │
│  템플릿 선택:                            │
│  ┌───────────────────────────────────┐  │
│  │ ▼ 웹 서버 (중형)                 │  │
│  └───────────────────────────────────┘  │
│    • OS: ubuntu-server                   │
│    • CPU: 4 코어                         │
│    • Memory: 4096 MB                     │
│                                         │
│  VM 이름:                                │
│  [web-server-01________________]       │
│                                         │
│  [VM 생성하기]                           │
└─────────────────────────────────────────┘
```

---

## 🔧 기술적 구현 내용

### 1. 데이터베이스 모델

```go
type VMTemplate struct {
    ID          uint      `gorm:"primaryKey"`
    Name        string    `gorm:"not null"`        // 템플릿 이름
    Description string    `json:"description"`     // 설명
    OSType      string    `gorm:"not null"`       // OS 타입
    CPU         int       `gorm:"not null"`       // CPU 코어 수
    Memory      int       `gorm:"not null"`       // Memory (MB)
    OwnerID     uint      `gorm:"not null"`       // 생성자 ID
    IsPublic    bool      `gorm:"default:false"`  // 공개 템플릿 여부
    CreatedAt   time.Time
    UpdatedAt   time.Time
}
```

### 2. API 엔드포인트

```
GET    /api/templates              # 템플릿 목록 조회
POST   /api/templates              # 템플릿 생성
GET    /api/templates/{id}         # 템플릿 상세 조회
PUT    /api/templates/{id}         # 템플릿 수정
DELETE /api/templates/{id}         # 템플릿 삭제
POST   /api/vms/from-template      # 템플릿에서 VM 생성
```

### 3. VM 생성 플로우

**템플릿 사용 시**:
```
1. 사용자가 템플릿 선택
2. VM 이름만 입력
3. 백엔드에서 템플릿 정보 가져오기
4. 템플릿의 CPU, Memory, OS 타입으로 VM 생성
```

**직접 입력 시** (현재 방식 유지):
```
1. 모든 필드 직접 입력
2. 기존 방식대로 VM 생성
```

---

## ✨ 추가 기능 아이디어

### 1. 공개 템플릿
- Admin이 만든 템플릿을 모든 사용자가 사용 가능
- "표준 설정" 보장

### 2. 템플릿 카테고리
- "웹 서버", "데이터베이스", "개발 환경" 등으로 분류
- 찾기 쉬움

### 3. 템플릿 사용 통계
- 어떤 템플릿이 많이 사용되는지 확인
- 인기 템플릿 표시

### 4. 템플릿 복사
- 기존 템플릿을 복사해서 약간 수정
- 빠른 템플릿 생성

### 5. 템플릿 공유
- 사용자 간 템플릿 공유
- 팀 표준 템플릿 배포

---

## 📊 예상 효과

### 시간 절약
- **템플릿 없이**: VM 생성당 약 30초 (4개 필드 입력)
- **템플릿 사용**: VM 생성당 약 5초 (이름만 입력)
- **절약**: 약 83% 시간 단축

### 실수 방지
- CPU/Memory 값 입력 실수 방지
- 일관된 설정 보장

### 사용자 경험
- 초보자도 쉽게 VM 생성
- 자주 사용하는 설정 빠르게 접근

---

## 🎯 결론

**VM 템플릿 시스템**은 자주 사용하는 VM 설정을 미리 저장해두고, 
한 번의 클릭으로 빠르게 VM을 생성할 수 있게 해주는 기능입니다.

**비유**: 
- 템플릿 없이 = 매번 레시피를 처음부터 읽으면서 요리
- 템플릿 사용 = 자주 만드는 요리의 레시피를 메모해두고, 그걸 보고 빠르게 요리

**주요 장점**:
1. ⚡ **빠른 VM 생성** (시간 절약)
2. ✅ **설정 실수 방지** (일관성)
3. 🎯 **표준화** (팀/조직 단위)
4. 👥 **사용자 편의성** (초보자도 쉬움)

---

**작성일**: 2024년


---

## 관련 문서

- [Legacy 기록](./)

---

**태그**: `#아카이브` `#Legacy` `#기능-설명` `#과거-기록`

**카테고리**: 아카이브 > Legacy 기록 > 기능 설명

**상태**: 과거 기록

**마지막 업데이트**: 2024-12-23
