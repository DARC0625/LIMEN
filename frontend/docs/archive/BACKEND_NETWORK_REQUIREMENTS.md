# 백엔드 서버 네트워크 설정 요구사항 (최소)

## 필수 네트워크 인터페이스

### eth1 (주요 내부망)
- **IP 주소**: `10.0.0.100/24`
- **용도**: 프론트엔드 서버(10.0.0.10)와 통신
- **상태**: UP (활성화)

### eth0 (인터넷 + 추가 내부망)
- **인터넷 IP**: `61.73.245.105/24`
- **게이트웨이**: `61.73.245.1`
- **추가 내부망 IP**: `10.0.0.110/24` (선택사항)
- **상태**: UP (활성화)

## 필수 포트 설정

### 리스닝 포트
- **포트 18443**: LIMEN 백엔드 API
  - **리스닝 주소**: `0.0.0.0:18443` (모든 인터페이스)
  - **접근 허용**: 프론트엔드(10.0.0.10)에서 접근 가능해야 함

- **포트 9000**: Agent 서비스
  - **리스닝 주소**: `0.0.0.0:9000` (모든 인터페이스)
  - **접근 허용**: 프론트엔드(10.0.0.10)에서 접근 가능해야 함

## 최소 방화벽 규칙

### 인바운드 (Inbound)
```bash
# 프론트엔드에서 API 접근 허용
allow from 10.0.0.10 to any port 18443

# 프론트엔드에서 Agent 접근 허용
allow from 10.0.0.10 to any port 9000

# 또는 내부망 전체 허용
allow from 10.0.0.0/24 to any port 18443
allow from 10.0.0.0/24 to any port 9000
```

### 아웃바운드 (Outbound)
- 모든 아웃바운드 통신 허용 (기본)

## 확인 명령어

### 네트워크 인터페이스 확인
```bash
ip addr show eth1 | grep "inet "
# 출력: inet 10.0.0.100/24
```

### 리스닝 포트 확인
```bash
sudo netstat -tuln | grep -E "18443|9000"
# 또는
ss -tuln | grep -E "18443|9000"
# 출력 예시:
# tcp  0  0  0.0.0.0:18443  0.0.0.0:*  LISTEN
# tcp  0  0  0.0.0.0:9000   0.0.0.0:*  LISTEN
```

### 프론트엔드에서 접근 테스트
```bash
# 프론트엔드 서버에서 실행
curl http://10.0.0.100:18443/api/health
curl http://10.0.0.100:9000/health
```

## 요약

### 필수 사항
1. ✅ **eth1 인터페이스**: `10.0.0.100/24` (UP 상태)
2. ✅ **포트 18443**: `0.0.0.0:18443` 리스닝
3. ✅ **포트 9000**: `0.0.0.0:9000` 리스닝
4. ✅ **방화벽**: 프론트엔드(10.0.0.10)에서 포트 18443, 9000 접근 허용

### 선택 사항
- eth0의 추가 내부망 IP (10.0.0.110)는 필수 아님
- 인터넷 IP (61.73.245.105)는 프론트엔드가 프록시하므로 직접 노출 불필요

## 통신 경로

```
프론트엔드 (10.0.0.10, enp1s0)
  ↓ 내부망
백엔드 (10.0.0.100, eth1)
  ↓ 포트 18443 (API)
LIMEN 백엔드 API

프론트엔드 (10.0.0.10, enp1s0)
  ↓ 내부망
백엔드 (10.0.0.100, eth1)
  ↓ 포트 9000 (Agent)
Agent 서비스
```




