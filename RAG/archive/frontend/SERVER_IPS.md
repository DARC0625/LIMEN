# 프론트엔드 서버 IP 주소 정보

## 서버 정보
- **호스트명**: `$(hostname)`
- **현재 작업 디렉토리**: `/home/darc`
- **확인 일시**: $(date)

## 프론트엔드 서버 IP 주소 (확인됨)

### 내부망 IP
- **IP 주소**: `10.0.0.10`
- **인터페이스**: `enp1s0`
- **용도**: 백엔드 서버(10.0.0.100)와 내부 통신
- **서브넷**: `/24`

### 인터넷 IP
- **IP 주소**: `14.54.57.159`
- **인터페이스**: `enp3s0`
- **용도**: 외부 사용자 접근 (Envoy 프록시)
- **서브넷**: `/24`
- **기본 게이트웨이**: `14.54.57.1`
- **외부 확인 IP**: `14.54.57.159` (ifconfig.me 확인)

## 백엔드 서버 IP 주소 (확인됨)

### 인터넷 IP
- **IP 주소**: `61.73.245.105`
- **인터페이스**: `eth0`
- **게이트웨이**: `61.73.245.1`
- **용도**: 외부 접근용 (프론트엔드가 프록시하므로 직접 사용하지 않음)
- **서브넷**: `/24`

### 내부망 IP
- **주요 내부망 IP**: `10.0.0.100` (eth1)
  - **인터페이스**: `eth1`
  - **용도**: 프론트엔드 서버와 내부 통신 (주요)
  - **서브넷**: `/24`
- **추가 내부망 IP**: `10.0.0.110` (eth0)
  - **인터페이스**: `eth0`
  - **용도**: 추가 내부망 경로
  - **서브넷**: `/24`
- **Libvirt 브리지**: `192.168.122.1` (virbr0) - DOWN 상태

### 포트 및 리스닝
- **리스닝**: `0.0.0.0:18443` (모든 인터페이스)
- **포트**: 
  - `18443` (LIMEN 백엔드 API)
  - `9000` (Agent 서비스)

### 접근 방법
- **인터넷 접근**: `http://61.73.245.105:18443` (프론트엔드가 프록시하므로 직접 사용 안 함)
- **내부망 접근**: `http://10.0.0.100:18443` 또는 `http://10.0.0.110:18443`

## 네트워크 인터페이스 상세

### 확인 명령어
```bash
# 모든 네트워크 인터페이스 확인
ip addr show

# 인터페이스별 IP 주소 확인
for iface in $(ip link show | grep -E "^[0-9]+:" | awk '{print $2}' | sed 's/:$//'); do
  echo "=== $iface ==="
  ip addr show $iface | grep -E "inet " | awk '{print "  IP: "$2}'
done
```

### 인터페이스 목록
- `lo`: 127.0.0.1/8 (localhost)
- `enp1s0`: 10.0.0.10/24 (내부망)
- `enp3s0`: 14.54.57.159/24 (인터넷)
- `wlp2s0`: (무선, IP 없음)

### IP 주소 분류
- **내부망 IP**: `10.0.0.0/8`, `172.16.0.0/12`, `192.168.0.0/16` 대역
- **인터넷 IP**: 그 외 공인 IP 주소

## 중요 사항

### 프론트엔드 서버 (현재 서버)
- **내부망 IP**: 백엔드(10.0.0.100)와 통신용
- **인터넷 IP**: 외부 사용자 접근용

### 백엔드 서버
- **내부망 IP**: `10.0.0.100`
- **내부망 포트**: `18443` (API), `9000` (Agent)

## 설정 파일에서 사용하는 IP

### middleware.ts
```typescript
// 내부망 IP 사용 (백엔드와 통신)
const backendHost = '10.0.0.100';  // 백엔드 내부망 IP
const backendPort = '18443';        // 백엔드 내부망 포트
```

### envoy.yaml
```yaml
# 백엔드 클러스터 (내부망)
backend_cluster:
  address: 10.0.0.100  # 백엔드 내부망 IP
  port: 18443          # 백엔드 내부망 포트
```

## 주의사항

1. **절대 외부 IP를 직접 사용하지 않음**
   - 모든 백엔드 통신은 내부망 IP(10.0.0.100) 사용
   - 외부 사용자는 프론트엔드 인터넷 IP로 접근

2. **프론트엔드 인터넷 IP는 Envoy가 사용**
   - 외부 사용자 접근: 프론트엔드 인터넷 IP:443/80
   - Envoy가 내부 Next.js(127.0.0.1:9444)로 프록시

3. **API 클라이언트는 상대 경로 사용**
   - `fetch('/api/auth/session')` ← 상대 경로
   - Middleware가 내부망으로 프록시

