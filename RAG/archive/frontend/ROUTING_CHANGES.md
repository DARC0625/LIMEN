# 라우팅 변경 사항

## 변경 내용

루트 경로(`/`)를 명확하게 분리:
- **루트 경로(`/`)**: 대시보드 (인증 필요)
- **`/login`**: 로그인 페이지 (공개)
- **`/register`**: 회원가입 페이지 (공개)
- **`/vnc`**: VNC 콘솔 (인증 필요)
- 기타 경로들도 각각 명확한 용도로 사용

## 프론트엔드 변경 사항

### 1. `AuthGuard.tsx`
- 인증되지 않은 사용자가 루트 경로(`/`)에 접속하면 `/login`으로 리다이렉트
- 루트 경로를 공개 경로에서 제거 (대시보드로 사용)

### 2. `lib/auth/index.ts`
- 루트 경로(`/`)를 로그인 페이지로 간주하지 않도록 수정
- 로그인 페이지는 `/login`, `/register`만

## 프록시/백엔드 변경 사항

**변경 없음** ✅

프록시(Envoy)와 백엔드는 경로 기반으로 동작하므로:
- 프록시: 모든 경로를 Next.js로 전달 (경로별 특별한 처리 불필요)
- 백엔드: API 경로(`/api/*`)만 처리 (프론트엔드 경로와 무관)

## 동작 방식

### 인증되지 않은 사용자
1. `https://limen.kr/` 접속
2. `AuthGuard`가 인증 확인 → 인증되지 않음
3. `/login`으로 리다이렉트
4. 로그인 페이지 표시

### 인증된 사용자
1. `https://limen.kr/` 접속
2. `AuthGuard`가 인증 확인 → 인증됨
3. 대시보드(`/`) 표시

### 로그인 페이지
1. `https://limen.kr/login` 접속
2. 공개 경로이므로 인증 확인 스킵
3. 로그인 페이지 표시
4. 세션 확인 요청 없음 (토큰이 없을 때)

## 확인 사항

### 프론트엔드
- ✅ 루트 경로(`/`)는 대시보드
- ✅ `/login`은 로그인 페이지
- ✅ 인증되지 않은 사용자는 `/login`으로 리다이렉트
- ✅ 로그인 페이지에서는 세션 확인 요청 없음

### 프록시 (Envoy)
- ✅ 변경 없음 (모든 경로를 Next.js로 전달)

### 백엔드
- ✅ 변경 없음 (API 경로만 처리)

## 테스트

1. **인증되지 않은 사용자:**
   - `https://limen.kr/` 접속 → `/login`으로 리다이렉트 확인
   - Network 탭에서 `GET /api/auth/session` 요청 없음 확인

2. **인증된 사용자:**
   - `https://limen.kr/` 접속 → 대시보드 표시 확인
   - `https://limen.kr/login` 접속 → 대시보드로 리다이렉트 또는 로그인 페이지 유지 (선택 가능)

3. **로그인 페이지:**
   - `https://limen.kr/login` 접속 → 로그인 페이지 표시
   - Network 탭에서 `GET /api/auth/session` 요청 없음 확인



